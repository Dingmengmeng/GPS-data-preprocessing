# GPS-data-preprocessing
GPS data pre-processing 
第1步：
依据ORDERID字段提取本次研究对象订单所对应的所有GPS数据，作为GPS原始数据。同时，在数据初步检测中，发现原始数据中存在少量重复数据以及坐标出现极大偏离（一般表现为坐标定位在境外）的数据。将这些明显存在问题的数据剔除。

第2步：
需要确定首条记录点的正确性。受本研究汽车共享的运营模式限制，正常情况下，租车行为的起点应该是取车服务网点或网点附近少量异地还车订单不在本次研究范围之内）。通过GPS数据中待租车辆的停放位置确定网点的正确经纬度坐标，分别记为lon0和lat0，提取每一条租车订单的第一条GPS记录中经纬度坐标，分别记为lon1和lat1，根据经纬度计算距离公式可计算两空间点之间的距离。
考虑到车辆可能由于停车位被占用而停至网点附近停车场，选择D<1000m的订单，认为是符合本次研究数据要求的订单，并记所选的符合首条记录点的订单集合为{S}，集合以外的订单均认为是无效订单。

第3步：
对于数据集{S}中所有的订单记录，计算相邻两条记录之间的时间间隔T，如果T>60s则说明存在数据缺失情况。由于本研究对于轨迹刻画没有特殊要求，因此认为数据缺失在120s以内的数据均为可靠数据。

第4步：
根据Step2和Step3的计算结果，可以计算相邻两条记录间的平均速度v ，本研究基于相关研究经验速度采用阈值200km/h，若计算得到平均速度大于该阈值，则说明第i+1个点出现了明显偏移，应予以剔除。之后将第i+2条记录代入重新计算，直到速度满足设定的阈值，再计算下一个间隔。

第5步：
经过step4，得到任意第i个时间间隔的平均速度，在进行基于速度变化率的数据清洗之前，需要确定第一个时间间隔的平均速度是合理的，而第一个速度间隔一般为车辆起步阶段，本研究认为第一个间隔的平均速度应当小于30km/h，再将第二个时间间隔的平均速度与第一个间隔的平均速度代入式，若不符合判别式，则第3条数据存在问题，并将下一条数据代入计算，依次递推，最终得到处理后的数据集。
